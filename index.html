<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PlanetPatrol Dashboard</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="brand-header">
    <div class="brand-chip">Planet Patrol</div>
    <h1 class="brand-title">PlanetPatrol Dashboard</h1>
  </header>

  <div id="loading" class="loading" role="status" aria-live="polite">
    <div class="loading-card">
      <div class="loading-spinner" aria-hidden="true"></div>
      <p class="loading-text">Loading dashboard data...</p>
    </div>
  </div>
  <section id="error" class="status-page hidden" hidden>
    <h2>Unable to load dashboard data</h2>
    <p id="errorMessage">We could not pull data from the database. Please try again in a moment.</p>
  </section>

  <div id="dashboard" class="hidden" hidden>
    <div class="cards">
      <div class="card"><span class="value" id="totalPieces">0</span><div class="label">Total litter collected</div></div>
      <div class="card"><span class="value" id="unmoderatedPieces">0</span><div class="label">Unmoderated litter collected</div></div>
      <div class="card"><span class="value" id="moderated">0</span><div class="label">Moderated photos</div></div>
      <div class="card"><span class="value" id="unmoderated">0</span><div class="label">Unmoderated photos</div></div>
      <div class="card"><span class="value" id="totalPhotos">0</span><div class="label">Total photos</div></div>
      <section class="card country-box">
        <div class="country-current">
          <span id="countryFlag" class="country-flag" aria-hidden="true">üåç</span>
          <span id="countryName">All countries</span>
        </div>
        <label>Country:
          <select id="filterCountry">
            <option value="">All countries</option>
          </select>
        </label>
      </section>
    </div>

    <div class="filters">
      <label>Status: <select id="filterStatus"><option value="all">All</option><option value="moderated">Moderated</option><option value="unmoderated">Unmoderated</option></select></label>
      <label>Min pieces: <input type="number" id="filterMinPieces" min="0" value="0"></label>
      <label>Year: <select id="filterYear"><option value="">All</option></select></label>
      <label>Month (within selected year): <select id="filterMonth"><option value="">All</option><option value="1">Jan</option><option value="2">Feb</option><option value="3">Mar</option><option value="4">Apr</option><option value="5">May</option><option value="6">Jun</option><option value="7">Jul</option><option value="8">Aug</option><option value="9">Sep</option><option value="10">Oct</option><option value="11">Nov</option><option value="12">Dec</option></select></label>
      <label>Day of month: <select id="filterDay"><option value="">All</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option></select></label>
      <label>Brand/Label: <input id="filterBrandLabelSearch" type="text" placeholder="Type exact brand or label" autocomplete="off"></label>
    </div>

    <section class="panel">
      <h2>Collected over time</h2>
      <p id="timeSeriesSubtitle" class="muted hidden" hidden></p>
      <div class="chart-wrap">
        <svg id="timeSeriesChart" class="time-series" viewBox="0 0 900 280" preserveAspectRatio="xMinYMin meet" role="img"></svg>
        <div id="timeSeriesTooltip" class="ts-tooltip hidden" hidden></div>
      </div>
      <p id="timeSeriesEmpty" class="muted hidden" hidden>No data for current filters.</p>
    </section>

    <section class="panel">
      <h2>Top missions (Top 20)</h2>
      <p class="muted">Total pieces collected per mission</p>
      <ol id="topMissionsList" class="rank-list"></ol>
    </section>

    <section class="panel">
      <h2>Most Collected (Top 50)</h2>
      <div class="panel-grid">
        <details class="collapsible">
          <summary><span>Brands</span><span class="collapsible-hint">click for details</span></summary>
          <ol id="topBrandsList" class="rank-list"></ol>
        </details>
        <details class="collapsible">
          <summary><span>Labels</span><span class="collapsible-hint">click for details</span></summary>
          <ol id="topLabelsList" class="rank-list"></ol>
        </details>
      </div>
    </section>

  </div>

  <script src="js/config.js"></script>
  <script src="js/dom.js"></script>
  <script src="js/photo-helpers.js"></script>
  <script src="js/location.js"></script>
  <script src="js/date-utils.js"></script>
  <script src="js/stats.js"></script>
  <script src="js/filter-rules.js"></script>
  <script src="js/api.js"></script>
  <script src="js/time-series.js"></script>
  <script src="js/missions.js"></script>
  <script src="js/render.js"></script>
  <script src="js/filters.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
